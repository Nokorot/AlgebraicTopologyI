
% It's here because it's messing up my syntax highlighting 
%% NOTE: The align* environment doesn't work for some reason.
% this is a temporary fix
\renewenvironment{align*}{
\[ \arraycolsep=2pt \def\arraystretch{1.5}
\begin{array}{rl}
}{ \end{array} \] }


% Michele's stuff
% (I hope I don't break something...)
% (Most of the command are thought for livetexing but some became habits)
% ( :D don't worry. I'm a huge fan of shortcuts myself )

\makeatletter 
% \ni was used in the definitions of other commands. This is a solution
\newcommand{\@ni}{{n-1}}

\newcommand{\nmi}{{n-1}}
\newcommand{\npi}{{n+1}}
\newcommand{\nii}{\@ni} % \ni is an inverted inclusion

\newcommand{\mi}{{m-1}}
\newcommand{\ki}{{k-1}}

\newcommand{\smsh}{\wedge}
\newcommand{\pin}{\pi_n(X,x_0)}
\newcommand{\pini}{\pi_\@ni(X,x_0)}
\newcommand{\pinr}{\pi_n(X,A,x_0)}
\newcommand{\pinir}{\pi_\@ni(X,A,x_0)}
\newcommand{\hn}{H_n(X;\Z)}
\newcommand{\hni}{H_\@ni(X;\Z)}
\newcommand{\hnr}{H_n(X,A;\Z)}
\newcommand{\hnir}{H_\@ni(X,A;\Z)}
\newcommand{\dn}{D^n}
\newcommand{\dni}{D^\@ni}
\newcommand{\sn}{S^n}
\newcommand{\sni}{S^{n-1}}
\newcommand{\sph}{(D^n,\de D^n)}
\newcommand{\sphi}{(D^\@ni,\de D^\@ni)}
\newcommand{\sm}{\smallsetminus}
\newcommand{\til}{\tilde}
\newcommand{\fa}{\;\;\forall}
\newcommand{\ul}[1]{\,\underline{#1}\,}
\newcommand{\ol}{\overline}
\newcommand{\nf}{\normalfont}
\newcommand{\xs}{{x_1,\dots,x_n}}
\newcommand{\xso}{{x_0,\dots,x_n}}
\newcommand{\nn}[2]{{{#1}_1,\dots,{#1}_{#2}}}
\newcommand{\nno}[2]{{{#1}_0,\dots,{#1}_{#2}}}
\newcommand{\nns}[3]{{{#1}_1\,{#2}\,\dots\,{#2}\,{#1}_{#3}}}
\newcommand{\nnso}[3]{{{#1}_0\,{#2}\,\dots\,{#2}\,{#1}_{#3}}}
\newcommand{\cb}[1]{\{#1\}}
\newcommand{\de}{\partial}
%\newcommand{\xto}[1]{\xrightarrow{#1}}
\newcommand{\hto}{\hookrightarrow}
\newcommand{\cont}{\reflectbox{$\in$}}
\DeclareMathOperator{\Colim}{colim}
\DeclareMathOperator{\tel}{tel}
\DeclareMathOperator{\proj}{proj}
\DeclareMathOperator{\ev}{ev}


% Tor's stuff
\newcommand{\orth}{\bot}
\newcommand{\se}{\subseteq}
\renewcommand{\ss}{\subset}
\renewcommand{\i}{^{-1}}
\newcommand{\oc}[1]{\overset{\circ}{#1}}
\newcommand{\into}{\hookrightarrow}
\newcommand{\onto}{\twoheadrightarrow}
\newcommand{\nb}{\nabla}
\renewcommand{\hat}{\widehat}
\newcommand{\wtil}{\widetilde}

\usepackage{scalerel,stackengine}
\stackMath
\renewcommand\widehat[1]{%
\savestack{\tmpbox}{\stretchto{%
  \scaleto{%
    \scalerel*[\widthof{\ensuremath{#1}}]{\kern.1pt\mathchar"0362\kern.1pt}%
    {\rule{0ex}{\textheight}}%WIDTH-LIMITED CIRCUMFLEX
  }{\textheight}% 
}{2.4ex}}%
\stackon[-6.9pt]{#1}{\tmpbox}%
}

\makeatletter
\newsavebox{\@Wedge}
\sbox\@Wedge{%
% $\mathlarger{ \mathlarger{\mathlarger{ \mathlarger{ \wedge }}}}$ }
\scalebox{1.5}{\raisebox{-1pt}{$\wedge$}} }
\newcommand{\Wedge}{\usebox{\@Wedge}}
\makeatother


% Direct limit and colimit
\makeatletter
\newcommand{\lim@}[2]{%
  \vtop{\m@th\ialign{##\cr
    \hfil$#1\operator@font lim$\hfil\cr
    \noalign{\nointerlineskip\kern1.5\ex@}#2\cr
    \noalign{\nointerlineskip\kern-\ex@}\cr}}%
}
\newcommand{\colim}{%
  \mathop{\mathpalette\varlim@{\rightarrowfill@\scriptscriptstyle}}\nmlimits@
}
\newcommand{\invlim}{%
  \mathop{\mathpalette\varlim@{\leftarrowfill@\scriptscriptstyle}}\nmlimits@
}
\makeatother


\newcommand{\diagSquare}[8]{
\begin{tikzpicture}[node distance=2cm, auto]
\node (a)              { $ #5 $ };
\node (b) [right of=a] { $ #6 $ };
\node (c) [below of=a] { $ #7 $ };
\node (d) [right of=c] { $ #8 $ };
\draw[-to] (a) to node { $ #1 $ } (b);
\draw[-to] (a) to node { $ #2 $ } (c);
\draw[-to] (b) to node { $ #3 $ } (d);
\draw[-to] (c) to node { $ #4 $ } (d);
\end{tikzpicture}
}

\newcommand{\simto}{\xrightarrow{\sim}}
\newcommand{\incto}[1][]{ \xhookrightarrow{#1} }
\newcommand{\xto}[1]{\xrightarrow{#1}}

% Text key words
\newcommand{\tif}{\text{if }}
\newcommand{\tand}{\text{and }}
\newcommand{\tsince}{\text{since }}


% Projective spaces
\def\RP{\mathbb{RP}}
\def\CP{\mathbb{CP}}
\def\HP{\mathbb{HP}}

% Common Categories
\DeclareMathOperator{\Top}   {\bf Top}
\DeclareMathOperator{\Ab}    {\bf Ab}
\DeclareMathOperator{\Cat}   {\bf Cat}
\DeclareMathOperator{\CAT}   {\bf CAT}
\DeclareMathOperator{\Mod}   {\bf Mod}
\DeclareMathOperator{\Ring}  {\bf Ring}
\DeclareMathOperator{\Group} {\bf Group}
\DeclareMathOperator{\sSet}  {{\bf sSet}}

% Homological Algebra
\DeclareMathOperator{\Hom}   {Hom}
\DeclareMathOperator{\Tor}   {Tor}
\DeclareMathOperator{\Ext}   {Ext}

% Common Lie Groups 
\let \O \undefined

\DeclareMathOperator{\GL}    {GL}
\DeclareMathOperator{\SU}    {SU}
\DeclareMathOperator{\U}     {U}
\DeclareMathOperator{\O}     {O}
\DeclareMathOperator{\SO}    {SO}
\DeclareMathOperator{\Sp}    {Sp}
\DeclareMathOperator{\Gr}    {Gr}

% Maths Operators
\DeclareMathOperator{\pr}    {pr}
\DeclareMathOperator{\id}    {id}
\DeclareMathOperator{\Ker}   {Ker}
\DeclareMathOperator{\im}    {Im}

% \let \span \undefined
\DeclareMathOperator{\tspan}  {span}

% Standard sets
\def \N {\mathbb{N}}
\def \Z {\mathbb{Z}}
\def \Q {\mathbb{Q}}
\def \R {\mathbb{R}}
\def \C {\mathbb{C}}
\def \H {\mathbb{H}}

\def \E {\mathbb{E}}
\def \Z {\mathbb{Z}}
\def \I {\mathbb{I}}
\def \J {\mathbb{J}}

% Vector calculus
\newcommand{\dif}[3][]{
	\ensuremath{\frac{d^{#1} {#2}}{d {#3}^{#1}}}}
\newcommand{\pdif}[3][]{
	\ensuremath{\frac{\partial^{#1} {#2}}{\partial {#3}^{#1}}}}

% Vectors and matrices
\newcommand{\mat}[1]{\begin{matrix} #1 \end{matrix}}
\newcommand{\pmat}[1]{\begin{pmatrix} #1 \end{pmatrix}}
\newcommand{\bmat}[1]{\begin{bmatrix} #1 \end{bmatrix}}

% Add space around the argument
\newcommand{\qq}[1]{\quad#1\quad}
\newcommand{\q}[1]{\:\:#1\:\:}

% Implications
\newcommand{\la} {\ensuremath{\Longleftarrow}}
\newcommand{\ra} {\ensuremath{\Longrightarrow}}
\newcommand{\lra}{\ensuremath{\Longleftrightarrow}}

\newcommand{\pwf}[1]{\begin{cases} #1 \end{cases}}

% Shorthand
\newcommand{\vphi}{\varphi}
\newcommand{\veps}{\varepsilon}
\newcommand{\eps}{\epsilon}

\newcommand{\<}[1]{\langle #1 \rangle}

% Notation
\newcommand{\wddef}[1]{\underline{#1}}
\newcommand{\pref}[1]{(\ref{#1})}

% Maths Operators
\theoremstyle{plain}
\theoremstyle{definition}
\newtheorem{thrm}{Theorem}[section]
\newtheorem{prop}[thrm]{Proposition}
\newtheorem{corol}[thrm]{Corollary}
\newtheorem{lemma}[thrm]{Lemma}

\newtheorem{defn}[thrm]{Definition}
\newtheorem{exmp}[thrm]{Example}
\newtheorem{clame}[thrm]{Clame}

\theoremstyle{remark}
% \newtheorem{remark}[thrm]{\normalfont\large\textit Remark}
\newtheorem{remark}[thrm]{Remark}
\newtheorem{note}[thrm]{Note}
